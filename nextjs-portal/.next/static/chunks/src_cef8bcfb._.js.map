{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/JEFF%20OTIENO/OneDrive/Desktop/ict-authority-students-portal-27/nextjs-portal/src/components/GlassCard.tsx"],"sourcesContent":["import { ReactNode } from 'react'\r\n\r\ninterface GlassCardProps {\r\n  children: ReactNode\r\n  className?: string\r\n  onClick?: () => void\r\n}\r\n\r\nexport const GlassCard = ({ children, className = '', onClick }: GlassCardProps) => {\r\n  return (\r\n    <div \r\n      className={`bg-gray-800/50 backdrop-blur-xl border border-gray-700/50 rounded-xl shadow-lg ${className}`}\r\n      onClick={onClick}\r\n    >\r\n      {children}\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAQO,MAAM,YAAY,CAAC,EAAE,QAAQ,EAAE,YAAY,EAAE,EAAE,OAAO,EAAkB;IAC7E,qBACE,6LAAC;QACC,WAAW,CAAC,+EAA+E,EAAE,WAAW;QACxG,SAAS;kBAER;;;;;;AAGP;KATa","debugId":null}},
    {"offset": {"line": 35, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/JEFF%20OTIENO/OneDrive/Desktop/ict-authority-students-portal-27/nextjs-portal/src/components/ui/button.tsx"],"sourcesContent":["import { ReactNode } from 'react'\r\n\r\ninterface ButtonProps {\r\n  children: ReactNode\r\n  onClick?: () => void\r\n  disabled?: boolean\r\n  variant?: 'default' | 'outline'\r\n  className?: string\r\n}\r\n\r\nexport const Button = ({\r\n  children,\r\n  onClick,\r\n  disabled = false,\r\n  variant = 'default',\r\n  className = ''\r\n}: ButtonProps) => {\r\n  const baseStyles = 'px-4 py-2 rounded-md font-medium transition-colors'\r\n  const variantStyles = {\r\n    default: 'bg-blue-600 text-white hover:bg-blue-700',\r\n    outline: 'border border-gray-600 text-gray-300 hover:bg-gray-700/50'\r\n  }\r\n\r\n  return (\r\n    <button\r\n      onClick={onClick}\r\n      disabled={disabled}\r\n      className={`${baseStyles} ${variantStyles[variant]} ${className}`}\r\n    >\r\n      {children}\r\n    </button>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAUO,MAAM,SAAS,CAAC,EACrB,QAAQ,EACR,OAAO,EACP,WAAW,KAAK,EAChB,UAAU,SAAS,EACnB,YAAY,EAAE,EACF;IACZ,MAAM,aAAa;IACnB,MAAM,gBAAgB;QACpB,SAAS;QACT,SAAS;IACX;IAEA,qBACE,6LAAC;QACC,SAAS;QACT,UAAU;QACV,WAAW,GAAG,WAAW,CAAC,EAAE,aAAa,CAAC,QAAQ,CAAC,CAAC,EAAE,WAAW;kBAEhE;;;;;;AAGP;KAtBa","debugId":null}},
    {"offset": {"line": 69, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/JEFF%20OTIENO/OneDrive/Desktop/ict-authority-students-portal-27/nextjs-portal/src/components/ReportsTab.tsx"],"sourcesContent":["'use client'\r\nimport { useState, useEffect } from 'react'\r\nimport { GlassCard } from './GlassCard'\r\nimport { Button } from './ui/button'\r\nimport jsPDF from 'jspdf'\r\nimport autoTable from 'jspdf-autotable'\r\n// Assuming Chart.js is globally available or properly imported elsewhere\r\n// import { Chart } from 'chart.js'; // Uncomment if needed and Chart.js is installed/configured\r\n\r\ninterface ReportTemplate {\r\n  id: string\r\n  name: string\r\n  description?: string\r\n  query: string\r\n  columns: string[]\r\n  created_at: string\r\n}\r\n\r\ninterface ReportData {\r\n  columns: string[]\r\n  rows: Record<string, any>[]\r\n  analysis?: { // Add optional analysis field\r\n    status_counts?: Record<string, number>\r\n    generated_at?: string\r\n    total_records?: number\r\n  }\r\n}\r\n\r\nexport default function ReportsTab() {\r\n  const [templates, setTemplates] = useState<ReportTemplate[]>([])\r\n  const [activeTemplate, setActiveTemplate] = useState<string | null>(null)\r\n  const [reportData, setReportData] = useState<ReportData | null>(null)\r\n  const [isLoading, setIsLoading] = useState(false)\r\n  const [selectedFileId, setSelectedFileId] = useState<string | null>(null)\r\n\r\n  // Fetch report templates\r\n  useEffect(() => {\r\n    const fetchTemplates = async () => {\r\n      try {\r\n        const res = await fetch('http://localhost:8001/api/reports/templates')\r\n        if (!res.ok) {\r\n          throw new Error(`HTTP error! status: ${res.status}`)\r\n        }\r\n        const data = await res.json()\r\n        setTemplates(Array.isArray(data) ? data : [])\r\n      } catch (error) {\r\n        console.error('Failed to fetch templates', error)\r\n      }\r\n    }\r\n    fetchTemplates()\r\n  }, [])\r\n\r\n  // Generate report - Fetch data including analysis\r\n  const generateReport = async (templateId: string) => {\r\n    setIsLoading(true);\r\n    setSelectedFileId(null);\r\n    try {\r\n      const res = await fetch(`http://localhost:8001/api/reports/generate/${templateId}`, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' }\r\n      });\r\n      if (!res.ok) throw new Error(`Failed to generate report: ${res.statusText}`);\r\n      const data = await res.json();\r\n      console.log(\"[generateReport] Received data from backend:\", JSON.stringify(data, null, 2)); // Deeper log\r\n      if (!data?.columns || !data?.rows || !data?.analysis) {\r\n         console.error(\"[generateReport] Data format issue: Missing columns, rows, or analysis.\", data);\r\n         if (data?.columns && data?.rows) {\r\n            setReportData({ columns: data.columns, rows: data.rows, analysis: {} });\r\n         } else {\r\n            throw new Error('Invalid report data format received from backend.');\r\n         }\r\n      } else {\r\n        setReportData(data);\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to generate report', error);\r\n      setReportData(null);\r\n      alert(`Error generating report: ${error instanceof Error ? error.message : String(error)}`);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n\r\n  // Export report\r\n  const exportReport = async (format: 'csv' | 'excel' | 'pdf') => {\r\n    if (!activeTemplate || !reportData) {\r\n      alert('Please generate a report first.')\r\n      return\r\n    }\r\n\r\n    console.log(\"[exportReport] Starting export. Current reportData:\", JSON.stringify(reportData, null, 2)); // Deeper log\r\n\r\n    const rowsToExport = selectedFileId\r\n      ? reportData.rows.filter(row => String(row.id) === selectedFileId)\r\n      : reportData.rows;\r\n\r\n    if (selectedFileId && rowsToExport.length === 0) {\r\n        alert('No data available for the selected file to export.');\r\n        return;\r\n    }\r\n\r\n    const timestamp = new Date().toISOString().replace(/[:.]/g, '-')\r\n    const pdfSuffix = selectedFileId ? `file_${selectedFileId}` : 'summary';\r\n    const filenameBase = `report_${activeTemplate}_${format === 'pdf' ? pdfSuffix : (selectedFileId || 'all')}`\r\n    const filename = `${filenameBase}_${timestamp}`;\r\n\r\n\r\n    if (format === 'pdf') {\r\n      // --- PDF Generation (Summary + Chart ONLY using autoTable for layout) ---\r\n      try {\r\n        const doc = new jsPDF({ orientation: 'portrait', unit: 'pt', format: 'a4' });\r\n        const title = selectedFileId ? `Analysis Report - File ID: ${selectedFileId}` : \"Analysis Report\";\r\n        const totalRecords = reportData.analysis?.total_records ?? reportData.rows.length;\r\n        const generatedAt = reportData.analysis?.generated_at ?? new Date().toISOString();\r\n\r\n        console.log(`[exportReport PDF] Title: ${title}, Total Records: ${totalRecords}, Generated At: ${generatedAt}`);\r\n\r\n        // --- Title (drawn directly) ---\r\n        doc.setFontSize(16);\r\n        doc.text(title, doc.internal.pageSize.getWidth() / 2, 40, { align: 'center' });\r\n        let startY = 60; // Y position after title\r\n\r\n        // --- Prepare Summary Content ---\r\n        const summaryLines: string[] = [\r\n          `Generated at: ${generatedAt}`,\r\n          `Total records analyzed: ${totalRecords}`\r\n        ];\r\n         if (selectedFileId) {\r\n             summaryLines.push(`(Previewing details for File ID: ${selectedFileId})`);\r\n         }\r\n        const statusCounts = reportData.analysis?.status_counts;\r\n        console.log(\"[exportReport PDF] Status Counts object:\", statusCounts);\r\n        if (statusCounts && typeof statusCounts === 'object' && Object.keys(statusCounts).length > 0) {\r\n          summaryLines.push(\" \");\r\n          summaryLines.push(\"Overall Status Breakdown:\");\r\n          for (const [status, count] of Object.entries(statusCounts)) {\r\n            const statusLabel = status === 'unknown' || status === 'null' || !status ? 'Pending/Unknown' : status;\r\n            summaryLines.push(`- ${statusLabel}: ${count}`);\r\n          }\r\n        } else {\r\n          summaryLines.push(\" \");\r\n          summaryLines.push(\"Status breakdown not available.\");\r\n        }\r\n        const summaryContent = summaryLines.join('\\n'); // Join lines for single cell\r\n\r\n        // --- Prepare Chart Image ---\r\n        let chartImageBase64: string | null = null;\r\n        let chartImgWidth = 0;\r\n        let chartImgHeight = 0;\r\n        const chartPlaceholderText = \"Chart could not be generated or no status data.\";\r\n\r\n        if (statusCounts && Object.keys(statusCounts).length > 0) {\r\n          console.log(\"[exportReport PDF] Attempting to generate chart.\");\r\n          try {\r\n            const offscreenCanvas = document.createElement('canvas');\r\n            offscreenCanvas.width = 500; // Adjusted for potentially better scaling\r\n            offscreenCanvas.height = 220;\r\n            const ctx = offscreenCanvas.getContext('2d');\r\n            if (ctx) {\r\n              // @ts-ignore\r\n              const { Chart, registerables } = await import('chart.js');\r\n              Chart.register(...registerables);\r\n              new Chart(ctx, { /* ... chart config ... */\r\n                 type: 'bar',\r\n                 data: {\r\n                   labels: Object.keys(statusCounts).map(status => status === 'unknown' || status === 'null' || !status ? 'Pending/Unknown' : status),\r\n                   datasets: [{ label: 'Status Count', data: Object.values(statusCounts), backgroundColor: 'rgba(54, 162, 235, 0.6)', borderColor: 'rgba(54, 162, 235, 1)', borderWidth: 1 }]\r\n                 },\r\n                 options: { responsive: false, animation: { duration: 0 }, plugins: { title: { display: true, text: 'Overall Status Distribution' }, legend: { display: false } }, scales: { y: { beginAtZero: true } } }\r\n              });\r\n              await new Promise(resolve => setTimeout(resolve, 100));\r\n              chartImageBase64 = offscreenCanvas.toDataURL('image/png');\r\n              console.log(\"[exportReport PDF] Chart generated successfully.\");\r\n\r\n              // Calculate image dimensions for layout table\r\n              const pageWidth = doc.internal.pageSize.getWidth();\r\n              const pageMargin = 40 * 2;\r\n              const availableWidth = pageWidth - pageMargin;\r\n              const imgProps = doc.getImageProperties(chartImageBase64);\r\n              chartImgWidth = availableWidth * 0.9; // Use 90% width\r\n              chartImgHeight = (imgProps.height * chartImgWidth) / imgProps.width;\r\n\r\n            } else { console.error(\"[exportReport PDF] Failed to get 2D context.\"); }\r\n          } catch (chartError) { console.error(\"[exportReport PDF] Client-side chart generation failed:\", chartError); }\r\n        } else { console.log(\"[exportReport PDF] Skipping chart generation (no status counts).\"); }\r\n\r\n        // --- Use autoTable for Layout ---\r\n        autoTable(doc, {\r\n            startY: startY,\r\n            body: [ // Each inner array is a row, each element in inner array is a cell\r\n                [summaryContent], // Row 1: Summary text\r\n                // Row 2: Placeholder for image (content drawn in didDrawCell) or error text\r\n                [chartImageBase64 ? '' : chartPlaceholderText]\r\n            ],\r\n            theme: 'plain', // No borders for layout table\r\n            styles: { fontSize: 9, cellPadding: 2 },\r\n            columnStyles: {\r\n                0: { cellWidth: 'auto' } // Let the single column take available width\r\n            },\r\n            didDrawCell: (data) => {\r\n                // Draw the image in the second row's cell if it exists\r\n                if (data.section === 'body' && data.row.index === 1 && chartImageBase64) {\r\n                    const cell = data.cell;\r\n                    // Center image within the cell bounds\r\n                    const x = cell.x + (cell.width - chartImgWidth) / 2;\r\n                    const y = cell.y + 2; // Add small top padding\r\n                    doc.addImage(chartImageBase64, 'PNG', x, y, chartImgWidth, chartImgHeight);\r\n                    console.log(`[exportReport PDF] Drew chart image in autoTable cell at Y=${y}`);\r\n                }\r\n            },\r\n            // Set row heights explicitly if needed, especially for the image row\r\n             rowPageBreak: 'avoid', // Try to keep rows together\r\n             bodyStyles: { // Set min height for rows\r\n                 minCellHeight: 20 // Ensure minimum space for text\r\n             }\r\n        });\r\n\r\n\r\n        // --- Table Removed ---\r\n\r\n        console.log(\"[exportReport PDF] Saving PDF document.\");\r\n        doc.save(`${filename}.pdf`);\r\n\r\n      } catch (error) {\r\n        console.error('PDF Export failed', error);\r\n        alert('Failed to export PDF report. Please try again.');\r\n      }\r\n\r\n    } else { // Handle CSV and Excel via backend\r\n      try {\r\n        const exportUrl = new URL(`http://localhost:8001/api/reports/export/${format}`)\r\n        exportUrl.searchParams.append('template_id', activeTemplate)\r\n        if (selectedFileId) {\r\n          exportUrl.searchParams.append('file_id', selectedFileId)\r\n        }\r\n        const res = await fetch(exportUrl.toString())\r\n        if (!res.ok) throw new Error(`Export failed: ${res.statusText}`)\r\n        const blob = await res.blob()\r\n        const downloadUrl = URL.createObjectURL(blob)\r\n        const a = document.createElement('a')\r\n        a.href = downloadUrl\r\n        if (format === 'csv') { a.download = `${filename}.csv` }\r\n        else if (format === 'excel') { a.download = `${filename}.xlsx` }\r\n        a.click()\r\n        URL.revokeObjectURL(downloadUrl)\r\n      } catch (error) {\r\n        console.error(`${format.toUpperCase()} Export failed`, error)\r\n        alert(`Failed to export ${format.toUpperCase()} report. Please try again.`)\r\n      }\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"p-6 space-y-6\">\r\n      <GlassCard className=\"p-6 backdrop-blur-xl bg-gray-800/40 border border-gray-700/50\">\r\n        <h1 className=\"text-2xl font-bold mb-6 text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-purple-500\">\r\n          Reports Dashboard\r\n        </h1>\r\n\r\n        {/* Template Selection */}\r\n        <div className=\"mb-6\">\r\n          <h2 className=\"text-lg font-semibold mb-4 text-gray-300\">Report Templates</h2>\r\n          {templates.length === 0 ? (\r\n             <p className=\"text-gray-400\">No templates loaded.</p>\r\n          ) : (\r\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n              {templates.map(template => (\r\n                <GlassCard\r\n                  key={template.id}\r\n                  className={`p-4 cursor-pointer transition-all hover:scale-[1.02] ${\r\n                    activeTemplate === template.id\r\n                      ? 'ring-2 ring-blue-500 bg-gradient-to-br from-blue-900/30 to-purple-900/30'\r\n                      : 'bg-gray-800/20 hover:bg-gray-700/30'\r\n                  }`}\r\n                  onClick={() => setActiveTemplate(template.id)}\r\n                >\r\n                  <div className=\"flex items-center space-x-3\">\r\n                    <div className={`w-3 h-3 rounded-full ${\r\n                      activeTemplate === template.id ? 'bg-blue-500' : 'bg-gray-600'\r\n                    }`} />\r\n                    <h3 className=\"font-medium text-gray-100\">{template.name}</h3>\r\n                  </div>\r\n                  {template.description && (\r\n                    <p className=\"text-sm text-gray-400 mt-2\">{template.description}</p>\r\n                  )}\r\n                </GlassCard>\r\n              ))}\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Report Actions */}\r\n        {activeTemplate && (\r\n          <div className=\"space-y-4\">\r\n            <Button\r\n              onClick={() => generateReport(activeTemplate)}\r\n              disabled={isLoading}\r\n              className=\"w-full md:w-auto transition-all hover:scale-[1.02]\"\r\n            >\r\n              {isLoading ? (\r\n                <span className=\"flex items-center\">\r\n                  <svg className=\"animate-spin -ml-1 mr-2 h-4 w-4 text-white\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\r\n                    <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\r\n                    <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\r\n                  </svg>\r\n                  Generating...\r\n                </span>\r\n              ) : 'Generate Report'}\r\n            </Button>\r\n\r\n            {reportData && reportData.rows.length > 0 && (\r\n              <div className=\"flex flex-wrap gap-2\">\r\n                <Button\r\n                  variant=\"outline\"\r\n                  onClick={() => exportReport('csv')}\r\n                  className=\"flex-1 md:flex-none bg-gray-800/50 hover:bg-gray-700/60 border-gray-700\"\r\n                >\r\n                  Export CSV\r\n                </Button>\r\n                <Button\r\n                  variant=\"outline\"\r\n                  onClick={() => exportReport('excel')}\r\n                  className=\"flex-1 md:flex-none bg-gray-800/50 hover:bg-gray-700/60 border-gray-700\"\r\n                >\r\n                  Export Excel\r\n                </Button>\r\n                <Button\r\n                  variant=\"outline\"\r\n                  onClick={() => exportReport('pdf')}\r\n                  className=\"flex-1 md:flex-none bg-gray-800/50 hover:bg-gray-700/60 border-gray-700\"\r\n                >\r\n                  Export PDF (Summary + Chart)\r\n                </Button>\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n\r\n        {/* Report Preview Table */}\r\n        {reportData && reportData.rows.length > 0 && (\r\n          <div className=\"mt-6 animate-fade-in\">\r\n            <div className=\"flex justify-between items-center mb-3\">\r\n              <h2 className=\"text-lg font-semibold text-gray-300\">\r\n                {selectedFileId ? `Previewing File ID: ${selectedFileId}` : 'Report Preview'}\r\n              </h2>\r\n              {selectedFileId && (\r\n                <Button\r\n                  variant=\"outline\"\r\n                  onClick={() => setSelectedFileId(null)}\r\n                  className=\"text-gray-400 hover:text-gray-200 text-sm px-2 py-1\"\r\n                >\r\n                  Show All Files\r\n                </Button>\r\n              )}\r\n            </div>\r\n            <GlassCard className=\"p-4 overflow-x-auto bg-gray-800/30 backdrop-blur-lg\">\r\n              <table className=\"w-full text-left\">\r\n                <thead>\r\n                  <tr>\r\n                    {reportData.columns.map((col) => (\r\n                      <th\r\n                        key={col}\r\n                        className=\"p-3 border-b border-gray-700/50 text-sm font-medium text-gray-300 uppercase tracking-wider\"\r\n                      >\r\n                        {col.replace(/_/g, ' ')}\r\n                      </th>\r\n                    ))}\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {(selectedFileId ? reportData.rows.filter(row => String(row.id) === selectedFileId) : reportData.rows)\r\n                   .map((row, i) => (\r\n                    <tr key={row.id || i} className=\"hover:bg-gray-800/40 transition-colors\">\r\n                      {reportData.columns.map((col) => (\r\n                        <td\r\n                          key={`${row.id || i}-${col}`}\r\n                          className={`p-3 border-b border-gray-800/50 text-sm ${\r\n                            col === 'id' ? 'cursor-pointer hover:text-blue-400 font-medium' : 'text-gray-300'\r\n                          }`}\r\n                          onClick={col === 'id' ? () => setSelectedFileId(row.id) : undefined}\r\n                          title={col === 'id' ? `Click to preview only file ${row.id}` : undefined}\r\n                        >\r\n                          {/* Truncate long file names in preview only */}\r\n                          {col === 'file_name' && typeof row[col] === 'string' && row[col].length > 50\r\n                            ? `${row[col].substring(0, 47)}...`\r\n                            : row[col]}\r\n                        </td>\r\n                      ))}\r\n                    </tr>\r\n                  ))}\r\n                </tbody>\r\n              </table>\r\n            </GlassCard>\r\n          </div>\r\n        )}\r\n         {reportData && reportData.rows.length === 0 && !isLoading && (\r\n             <p className=\"text-center text-gray-400 mt-6\">No data found for this report.</p>\r\n         )}\r\n      </GlassCard>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 661, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/JEFF%20OTIENO/OneDrive/Desktop/ict-authority-students-portal-27/nextjs-portal/src/components/NavItem.tsx"],"sourcesContent":["import { ReactNode } from 'react'\r\n\r\ninterface NavItemProps {\r\n  icon: ReactNode\r\n  label: string\r\n  active?: boolean\r\n  expanded?: boolean\r\n  onClick: () => void\r\n}\r\n\r\nexport default function NavItem({ icon, label, active = false, expanded = true, onClick }: NavItemProps) {\r\n  return (\r\n    <button\r\n      onClick={onClick}\r\n      className={`flex items-center px-2 py-3 rounded-lg w-full transition-colors ${\r\n        active ? 'bg-blue-600 text-white' : 'text-gray-300 hover:bg-gray-700/50'\r\n      }`}\r\n    >\r\n      <div className={expanded ? '' : 'mx-auto'}>\r\n        {icon}\r\n      </div>\r\n      {expanded && <span className=\"ml-3 text-sm\">{label}</span>}\r\n    </button>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAUe,SAAS,QAAQ,EAAE,IAAI,EAAE,KAAK,EAAE,SAAS,KAAK,EAAE,WAAW,IAAI,EAAE,OAAO,EAAgB;IACrG,qBACE,6LAAC;QACC,SAAS;QACT,WAAW,CAAC,gEAAgE,EAC1E,SAAS,2BAA2B,sCACpC;;0BAEF,6LAAC;gBAAI,WAAW,WAAW,KAAK;0BAC7B;;;;;;YAEF,0BAAY,6LAAC;gBAAK,WAAU;0BAAgB;;;;;;;;;;;;AAGnD;KAdwB","debugId":null}},
    {"offset": {"line": 706, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/JEFF%20OTIENO/OneDrive/Desktop/ict-authority-students-portal-27/nextjs-portal/src/lib/excelProcessor.ts"],"sourcesContent":["import * as XLSX from 'xlsx'\r\n\r\ninterface ProcessExcelFileOptions {\r\n  onProgress?: (progress: number) => void\r\n}\r\n\r\nexport async function processExcelFile(\r\n  file: File,\r\n  options?: ProcessExcelFileOptions\r\n): Promise<any> {\r\n  return new Promise((resolve, reject) => {\r\n    const reader = new FileReader()\r\n    \r\n    reader.onload = async (e) => {\r\n      try {\r\n        options?.onProgress?.(30)\r\n        const data = new Uint8Array(e.target?.result as ArrayBuffer)\r\n        const workbook = XLSX.read(data, { type: 'array' })\r\n        options?.onProgress?.(60)\r\n        \r\n        const sheetName = workbook.SheetNames[0]\r\n        const worksheet = workbook.Sheets[sheetName]\r\n        const json = XLSX.utils.sheet_to_json(worksheet)\r\n        options?.onProgress?.(80)\r\n        \r\n        // Basic frontend processing if backend fails\r\n        const processedData = json.map((row: any) => ({\r\n          ...row,\r\n          // Add basic calculations\r\n          attendanceRate: row.present ? (row.present / row.total) * 100 : 0,\r\n          completionRate: row.completed ? (row.completed / row.total) * 100 : 0\r\n        }))\r\n        \r\n        options?.onProgress?.(100)\r\n        \r\n        resolve({\r\n          rawData: json,\r\n          processedData: processedData,\r\n          recordCount: json.length\r\n        })\r\n      } catch (error) {\r\n        console.error('Error processing Excel file')\r\n        reject(error)\r\n      }\r\n    }\r\n\r\n    reader.onerror = (error) => {\r\n      console.error('Error reading file')\r\n      reject(error)\r\n    }\r\n\r\n    reader.readAsArrayBuffer(file)\r\n  })\r\n}\r\n"],"names":[],"mappings":";;;AAAA;;AAMO,eAAe,iBACpB,IAAU,EACV,OAAiC;IAEjC,OAAO,IAAI,QAAQ,CAAC,SAAS;QAC3B,MAAM,SAAS,IAAI;QAEnB,OAAO,MAAM,GAAG,OAAO;YACrB,IAAI;gBACF,SAAS,aAAa;gBACtB,MAAM,OAAO,IAAI,WAAW,EAAE,MAAM,EAAE;gBACtC,MAAM,WAAW,CAAA,GAAA,gIAAA,CAAA,OAAS,AAAD,EAAE,MAAM;oBAAE,MAAM;gBAAQ;gBACjD,SAAS,aAAa;gBAEtB,MAAM,YAAY,SAAS,UAAU,CAAC,EAAE;gBACxC,MAAM,YAAY,SAAS,MAAM,CAAC,UAAU;gBAC5C,MAAM,OAAO,gIAAA,CAAA,QAAU,CAAC,aAAa,CAAC;gBACtC,SAAS,aAAa;gBAEtB,6CAA6C;gBAC7C,MAAM,gBAAgB,KAAK,GAAG,CAAC,CAAC,MAAa,CAAC;wBAC5C,GAAG,GAAG;wBACN,yBAAyB;wBACzB,gBAAgB,IAAI,OAAO,GAAG,AAAC,IAAI,OAAO,GAAG,IAAI,KAAK,GAAI,MAAM;wBAChE,gBAAgB,IAAI,SAAS,GAAG,AAAC,IAAI,SAAS,GAAG,IAAI,KAAK,GAAI,MAAM;oBACtE,CAAC;gBAED,SAAS,aAAa;gBAEtB,QAAQ;oBACN,SAAS;oBACT,eAAe;oBACf,aAAa,KAAK,MAAM;gBAC1B;YACF,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC;gBACd,OAAO;YACT;QACF;QAEA,OAAO,OAAO,GAAG,CAAC;YAChB,QAAQ,KAAK,CAAC;YACd,OAAO;QACT;QAEA,OAAO,iBAAiB,CAAC;IAC3B;AACF","debugId":null}},
    {"offset": {"line": 760, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/JEFF%20OTIENO/OneDrive/Desktop/ict-authority-students-portal-27/nextjs-portal/src/lib/supabase.ts"],"sourcesContent":["import { createClient } from '@supabase/supabase-js'\r\n\r\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL\r\nconst supabaseKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY\r\n\r\nif (!supabaseUrl || !supabaseKey) {\r\n  throw new Error('Missing Supabase configuration')\r\n}\r\n\r\nexport const supabase = createClient(supabaseUrl, supabaseKey)\r\n\r\nexport async function insertData(table: string, data: any) {\r\n  const { data: insertedData, error } = await supabase\r\n    .from(table)\r\n    .insert([data])\r\n    .select()\r\n  \r\n  if (error) throw error\r\n  return insertedData\r\n}\r\n\r\nexport async function getData(table: string) {\r\n  const { data, error } = await supabase\r\n    .from(table)\r\n    .select('*')\r\n  \r\n  if (error) throw error\r\n  return data\r\n}\r\n"],"names":[],"mappings":";;;;;AAEoB;AAFpB;;AAEA,MAAM;AACN,MAAM;AAEN,uCAAkC;;AAElC;AAEO,MAAM,WAAW,CAAA,GAAA,0LAAA,CAAA,eAAY,AAAD,EAAE,aAAa;AAE3C,eAAe,WAAW,KAAa,EAAE,IAAS;IACvD,MAAM,EAAE,MAAM,YAAY,EAAE,KAAK,EAAE,GAAG,MAAM,SACzC,IAAI,CAAC,OACL,MAAM,CAAC;QAAC;KAAK,EACb,MAAM;IAET,IAAI,OAAO,MAAM;IACjB,OAAO;AACT;AAEO,eAAe,QAAQ,KAAa;IACzC,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,SAC3B,IAAI,CAAC,OACL,MAAM,CAAC;IAEV,IAAI,OAAO,MAAM;IACjB,OAAO;AACT","debugId":null}},
    {"offset": {"line": 794, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/components/EnhancedExcelUploader.module.css [app-client] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"progress-bar\": \"EnhancedExcelUploader-module__JHdKea__progress-bar\",\n  \"progress-container\": \"EnhancedExcelUploader-module__JHdKea__progress-container\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA"}},
    {"offset": {"line": 804, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/JEFF%20OTIENO/OneDrive/Desktop/ict-authority-students-portal-27/nextjs-portal/src/components/EnhancedExcelUploader.tsx"],"sourcesContent":["'use client'\r\nimport { useState, useRef, useEffect } from 'react'\r\nimport { FileUploader } from 'react-drag-drop-files'\r\nimport { processExcelFile } from '@/lib/excelProcessor'\r\nimport { supabase } from '@/lib/supabase'\r\nimport styles from './EnhancedExcelUploader.module.css'\r\n\r\nconst fileTypes = ['XLSX', 'XLS', 'CSV']\r\n\r\ninterface EnhancedExcelUploaderProps {\r\n  onUploadSuccess: (data: any) => void\r\n  maxFileSize?: number\r\n}\r\n\r\nexport default function EnhancedExcelUploader({ \r\n  onUploadSuccess,\r\n  maxFileSize = 10 // Default to 10MB\r\n}: EnhancedExcelUploaderProps) {\r\n  const [isLoading, setIsLoading] = useState(false)\r\n  const [progress, setProgress] = useState<number>(0)\r\n  const progressBarRef = useRef<HTMLDivElement>(null)\r\n\r\n  useEffect(() => {\r\n    if (progressBarRef.current) {\r\n      progressBarRef.current.style.width = `${progress}%`\r\n    }\r\n  }, [progress])\r\n\r\n  const [error, setError] = useState<string | null>(null)\r\n  const [success, setSuccess] = useState(false)\r\n\r\n  const handleFileChange = async (file: File) => {\r\n    if (file.size > maxFileSize * 1024 * 1024) {\r\n      setError(`File size exceeds ${maxFileSize}MB limit`)\r\n      return\r\n    }\r\n\r\n    setIsLoading(true)\r\n    setProgress(0)\r\n    setError(null)\r\n    setSuccess(false)\r\n\r\n    try {\r\n      const interval = setInterval(() => {\r\n        setProgress(prev => Math.min(prev + 10, 90))\r\n      }, 500)\r\n\r\n      // Process file directly in frontend\r\n      const result = await processExcelFile(file, {\r\n        onProgress: (progress: number) => {\r\n          setProgress(progress)\r\n        }\r\n      });\r\n\r\n      // Store in Supabase\r\n      let supabaseData;\r\n      try {\r\n        const { data, error } = await supabase\r\n          .from('analysis_results')\r\n          .insert([{\r\n            file_name: file.name,\r\n            data: result.processedData,\r\n            record_count: result.recordCount || 0\r\n          }])\r\n          .select();\r\n\r\n        if (error) throw error;\r\n        supabaseData = data?.[0];\r\n      } catch (error: any) {\r\n        console.error('Supabase storage error:', error.message);\r\n        throw new Error('Failed to store data in database');\r\n      }\r\n\r\n      clearInterval(interval);\r\n      setProgress(100);\r\n      setSuccess(true);\r\n      \r\n      // Pass processed data to parent component\r\n      onUploadSuccess({\r\n        rawData: result.rawData,\r\n        processedData: result.processedData,\r\n        recordCount: result.recordCount,\r\n        supabaseData: supabaseData\r\n      });\r\n    } catch (error: any) {\r\n      setError(error.message || 'Failed to process file')\r\n      // Pass error info to parent component\r\n      onUploadSuccess({\r\n        error: true,\r\n        message: error.message || 'Failed to process file'\r\n      })\r\n    } finally {\r\n      setIsLoading(false)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"w-full max-w-md p-6 bg-white/10 backdrop-blur-lg rounded-lg border border-white/20 relative\">\r\n      <div className=\"w-full\">\r\n        <FileUploader\r\n          handleChange={handleFileChange}\r\n          name=\"file\" \r\n          types={fileTypes}\r\n          disabled={isLoading}\r\n        >\r\n          <div className=\"flex flex-col items-center justify-center p-8 space-y-4\">\r\n            <svg\r\n              xmlns=\"http://www.w3.org/2000/svg\"\r\n              className=\"w-12 h-12 text-blue-400\"\r\n              fill=\"none\"\r\n              viewBox=\"0 0 24 24\"\r\n              stroke=\"currentColor\"\r\n            >\r\n              <path\r\n                strokeLinecap=\"round\"\r\n                strokeLinejoin=\"round\"\r\n                strokeWidth={2}\r\n                d=\"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12\"\r\n              />\r\n            </svg>\r\n            <p className=\"text-sm text-gray-300\">\r\n              Drag & drop Excel file or click to upload\r\n            </p>\r\n            <p className=\"text-xs text-gray-400\">\r\n              Supported formats: .xlsx, .xls, .csv\r\n            </p>\r\n          </div>\r\n        </FileUploader>\r\n\r\n        {isLoading && (\r\n          <div className=\"mt-4\">\r\n            <div className={styles['progress-container']}>\r\n              <div\r\n                ref={progressBarRef}\r\n                className={styles['progress-bar']}\r\n              ></div>\r\n            </div>\r\n            <p className=\"text-xs text-center mt-1 text-gray-400\">\r\n              Processing... {progress}%\r\n            </p>\r\n          </div>\r\n        )}\r\n\r\n        {error && (\r\n          <div className=\"mt-4 p-3 bg-red-500/20 text-red-300 rounded text-sm\">\r\n            {error}\r\n          </div>\r\n        )}\r\n\r\n        {success && (\r\n          <div className=\"mt-4 p-3 bg-green-500/20 text-green-300 rounded text-sm\">\r\n            File processed successfully!\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1037, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/JEFF%20OTIENO/OneDrive/Desktop/ict-authority-students-portal-27/nextjs-portal/src/components/UserList.tsx"],"sourcesContent":["import { useEffect, useState } from 'react';\r\nimport { GlassCard } from './GlassCard';\r\nimport type { SupabaseClient } from '@supabase/supabase-js';\r\nimport type { Database } from '../types/database.types';\r\n\r\ntype User = Database['public']['Tables']['users']['Row'] & {\r\n  user_roles: Array<Database['public']['Tables']['user_roles']['Row']>\r\n};\r\n\r\nexport default function UserList({ supabase }: { supabase: SupabaseClient<Database> }) {\r\n  const [users, setUsers] = useState<User[]>([]);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const fetchUsers = async () => {\r\n      const { data, error } = await supabase\r\n        .from('users')\r\n        .select('*, user_roles(role)')\r\n        .order('created_at', { ascending: false });\r\n\r\n      if (error) {\r\n        console.error('Error fetching users:', error);\r\n      } else {\r\n        setUsers(data || []);\r\n      }\r\n      setLoading(false);\r\n    };\r\n\r\n    fetchUsers();\r\n  }, [supabase]);\r\n\r\n  const filteredUsers = users.filter(user =>\r\n    user.email?.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n    user.full_name?.toLowerCase().includes(searchTerm.toLowerCase())\r\n  );\r\n\r\n  return (\r\n    <GlassCard className=\"p-4\">\r\n      <div className=\"mb-4\">\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Search users...\"\r\n          className=\"w-full p-2 bg-gray-800/50 border border-gray-700 rounded\"\r\n          value={searchTerm}\r\n          onChange={(e) => setSearchTerm(e.target.value)}\r\n        />\r\n      </div>\r\n\r\n      {loading ? (\r\n        <div className=\"text-center py-4\">Loading users...</div>\r\n      ) : (\r\n        <div className=\"overflow-x-auto\">\r\n          <table className=\"w-full\">\r\n            <thead>\r\n              <tr className=\"border-b border-gray-700\">\r\n                <th className=\"p-3 text-left\">Name</th>\r\n                <th className=\"p-3 text-left\">Email</th>\r\n                <th className=\"p-3 text-left\">Role</th>\r\n                <th className=\"p-3 text-left\">Status</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {filteredUsers.map((user) => (\r\n                <tr key={user.id} className=\"border-b border-gray-700/50 hover:bg-gray-800/30\">\r\n                  <td className=\"p-3\">{user.full_name}</td>\r\n                  <td className=\"p-3\">{user.email}</td>\r\n                  <td className=\"p-3\">\r\n                    {(user as any).user_roles?.[0]?.role || 'No role'}\r\n                  </td>\r\n                  <td className=\"p-3\">\r\n                    <span className={`px-2 py-1 rounded-full text-xs ${\r\n                      user.is_active ? 'bg-green-900/50 text-green-400' : 'bg-red-900/50 text-red-400'\r\n                    }`}>\r\n                      {user.is_active ? 'Active' : 'Inactive'}\r\n                    </span>\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      )}\r\n    </GlassCard>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;;;AAQe,SAAS,SAAS,EAAE,QAAQ,EAA0C;;IACnF,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAU,EAAE;IAC7C,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAC7C,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAEvC,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;8BAAE;YACR,MAAM;iDAAa;oBACjB,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,SAC3B,IAAI,CAAC,SACL,MAAM,CAAC,uBACP,KAAK,CAAC,cAAc;wBAAE,WAAW;oBAAM;oBAE1C,IAAI,OAAO;wBACT,QAAQ,KAAK,CAAC,yBAAyB;oBACzC,OAAO;wBACL,SAAS,QAAQ,EAAE;oBACrB;oBACA,WAAW;gBACb;;YAEA;QACF;6BAAG;QAAC;KAAS;IAEb,MAAM,gBAAgB,MAAM,MAAM,CAAC,CAAA,OACjC,KAAK,KAAK,EAAE,cAAc,SAAS,WAAW,WAAW,OACzD,KAAK,SAAS,EAAE,cAAc,SAAS,WAAW,WAAW;IAG/D,qBACE,6LAAC,kIAAA,CAAA,YAAS;QAAC,WAAU;;0BACnB,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBACC,MAAK;oBACL,aAAY;oBACZ,WAAU;oBACV,OAAO;oBACP,UAAU,CAAC,IAAM,cAAc,EAAE,MAAM,CAAC,KAAK;;;;;;;;;;;YAIhD,wBACC,6LAAC;gBAAI,WAAU;0BAAmB;;;;;qCAElC,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBAAM,WAAU;;sCACf,6LAAC;sCACC,cAAA,6LAAC;gCAAG,WAAU;;kDACZ,6LAAC;wCAAG,WAAU;kDAAgB;;;;;;kDAC9B,6LAAC;wCAAG,WAAU;kDAAgB;;;;;;kDAC9B,6LAAC;wCAAG,WAAU;kDAAgB;;;;;;kDAC9B,6LAAC;wCAAG,WAAU;kDAAgB;;;;;;;;;;;;;;;;;sCAGlC,6LAAC;sCACE,cAAc,GAAG,CAAC,CAAC,qBAClB,6LAAC;oCAAiB,WAAU;;sDAC1B,6LAAC;4CAAG,WAAU;sDAAO,KAAK,SAAS;;;;;;sDACnC,6LAAC;4CAAG,WAAU;sDAAO,KAAK,KAAK;;;;;;sDAC/B,6LAAC;4CAAG,WAAU;sDACX,AAAC,KAAa,UAAU,EAAE,CAAC,EAAE,EAAE,QAAQ;;;;;;sDAE1C,6LAAC;4CAAG,WAAU;sDACZ,cAAA,6LAAC;gDAAK,WAAW,CAAC,+BAA+B,EAC/C,KAAK,SAAS,GAAG,mCAAmC,8BACpD;0DACC,KAAK,SAAS,GAAG,WAAW;;;;;;;;;;;;mCAV1B,KAAK,EAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqBhC;GA5EwB;KAAA","debugId":null}},
    {"offset": {"line": 1238, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/JEFF%20OTIENO/OneDrive/Desktop/ict-authority-students-portal-27/nextjs-portal/src/components/UserManagementTab.tsx"],"sourcesContent":["import { GlassCard } from './GlassCard';\r\nimport { useState } from 'react';\r\nimport { createClient } from '@supabase/supabase-js';\r\nimport type { Database } from '../types/database.types';\r\nimport AddUserForm from './AddUserForm';\r\n\r\nexport default function UserManagementTab() {\r\n  const supabase = createClient<Database>(\r\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\r\n    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\r\n  );\r\n  const [activeView, setActiveView] = useState<'list' | 'roles' | 'activity'>('list');\r\n  const [showAddForm, setShowAddForm] = useState(false);\r\n  const [refreshKey, setRefreshKey] = useState(0);\r\n\r\n  return (\r\n    <GlassCard className=\"p-6\">\r\n      <div className=\"flex justify-between items-center mb-6 border-b border-gray-700 pb-2\">\r\n        <div className=\"flex\">\r\n          <button\r\n            className={`pb-2 px-4 ${activeView === 'list' ? 'text-blue-400 border-b-2 border-blue-400' : 'text-gray-400'}`}\r\n            onClick={() => setActiveView('list')}\r\n          >\r\n            User List\r\n          </button>\r\n          <button\r\n            className={`pb-2 px-4 ${activeView === 'roles' ? 'text-blue-400 border-b-2 border-blue-400' : 'text-gray-400'}`}\r\n            onClick={() => setActiveView('roles')}\r\n          >\r\n            Role Management\r\n          </button>\r\n          <button\r\n            className={`pb-2 px-4 ${activeView === 'activity' ? 'text-blue-400 border-b-2 border-blue-400' : 'text-gray-400'}`}\r\n            onClick={() => setActiveView('activity')}\r\n          >\r\n            Activity Log\r\n          </button>\r\n        </div>\r\n        <button \r\n          className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700\"\r\n          onClick={() => setActiveView('list')}\r\n        >\r\n          Add User\r\n        </button>\r\n      </div>\r\n\r\n      {activeView === 'list' && <UserList supabase={supabase} />}\r\n      {activeView === 'roles' && <RoleManagement supabase={supabase} />}\r\n      {activeView === 'activity' && <UserActivityLog supabase={supabase} />}\r\n    </GlassCard>\r\n  );\r\n}\r\n\r\nimport UserList from './UserList';\r\n\r\n// Placeholder components - will implement these next\r\nfunction RoleManagement({ supabase }: { supabase: any }) {\r\n  return <div>Role Management Component</div>;\r\n}\r\n\r\nfunction UserActivityLog({ supabase }: { supabase: any }) {\r\n  return <div>Activity Log Component</div>;\r\n}\r\n"],"names":[],"mappings":";;;AAQI;;AARJ;AACA;AACA;AAmDA;;;;;;AA/Ce,SAAS;;IACtB,MAAM,WAAW,CAAA,GAAA,0LAAA,CAAA,eAAY,AAAD;IAI5B,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAiC;IAC5E,MAAM,CAAC,aAAa,eAAe,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAC/C,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAE7C,qBACE,6LAAC,kIAAA,CAAA,YAAS;QAAC,WAAU;;0BACnB,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCACC,WAAW,CAAC,UAAU,EAAE,eAAe,SAAS,6CAA6C,iBAAiB;gCAC9G,SAAS,IAAM,cAAc;0CAC9B;;;;;;0CAGD,6LAAC;gCACC,WAAW,CAAC,UAAU,EAAE,eAAe,UAAU,6CAA6C,iBAAiB;gCAC/G,SAAS,IAAM,cAAc;0CAC9B;;;;;;0CAGD,6LAAC;gCACC,WAAW,CAAC,UAAU,EAAE,eAAe,aAAa,6CAA6C,iBAAiB;gCAClH,SAAS,IAAM,cAAc;0CAC9B;;;;;;;;;;;;kCAIH,6LAAC;wBACC,WAAU;wBACV,SAAS,IAAM,cAAc;kCAC9B;;;;;;;;;;;;YAKF,eAAe,wBAAU,6LAAC,iIAAA,CAAA,UAAQ;gBAAC,UAAU;;;;;;YAC7C,eAAe,yBAAW,6LAAC;gBAAe,UAAU;;;;;;YACpD,eAAe,4BAAc,6LAAC;gBAAgB,UAAU;;;;;;;;;;;;AAG/D;GA7CwB;KAAA;;AAiDxB,qDAAqD;AACrD,SAAS,eAAe,EAAE,QAAQ,EAAqB;IACrD,qBAAO,6LAAC;kBAAI;;;;;;AACd;MAFS;AAIT,SAAS,gBAAgB,EAAE,QAAQ,EAAqB;IACtD,qBAAO,6LAAC;kBAAI;;;;;;AACd;MAFS","debugId":null}},
    {"offset": {"line": 1380, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/JEFF%20OTIENO/OneDrive/Desktop/ict-authority-students-portal-27/nextjs-portal/src/app/page.tsx"],"sourcesContent":["'use client'\nimport { useState, useEffect } from 'react'\nimport { GlassCard } from '@/components/GlassCard'\nimport ReportsTab from '@/components/ReportsTab'\nimport { Button } from '@/components/ui/button'\n\nimport { Bell, BarChart2, Users, Settings, LogOut, Menu, X, Search, ChevronDown, Zap, Database, Shield, Layout, Globe } from 'lucide-react'\nimport { getData } from '@/lib/supabase'\nimport { Chart } from 'react-chartjs-2'\nimport { Chart as ChartJS, registerables } from 'chart.js'\nChartJS.register(...registerables)\nimport NavItem from '@/components/NavItem'\nimport EnhancedExcelUploader from '@/components/EnhancedExcelUploader'\nimport DataVisualization from '@/components/DataVisualization'\nimport { supabase } from '@/lib/supabase'\n\nexport default function AdminPortal() {\n  const [sidebarOpen, setSidebarOpen] = useState(true)\n  const [activeTab, setActiveTab] = useState('dashboard')\n  const [dropdownOpen, setDropdownOpen] = useState(false)\n\n  const toggleSidebar = () => setSidebarOpen(!sidebarOpen)\n  const toggleDropdown = () => setDropdownOpen(!dropdownOpen)\n\n  return (\n    <div className=\"flex h-screen bg-gray-900 text-gray-100\">\n      {/* Sidebar */}\n      <div className={`${sidebarOpen ? 'w-64' : 'w-20'} bg-gray-800/50 backdrop-blur-xl transition-all duration-300 flex flex-col border-r border-gray-700/50`}>\n        <div className=\"p-4 flex items-center justify-between border-b border-gray-700/50\">\n          {sidebarOpen ? (\n            <div className=\"flex items-center space-x-2\">\n              <Zap className=\"text-blue-400\" size={24} />\n              <span className=\"font-bold text-xl\">ICTA 2067</span>\n            </div>\n          ) : (\n            <Zap className=\"text-blue-400 mx-auto\" size={24} />\n          )}\n          <button \n            onClick={toggleSidebar} \n            className=\"p-1 rounded-full hover:bg-gray-7 00/50\"\n            aria-label={sidebarOpen ? \"Collapse sidebar\" : \"Expand sidebar\"}\n          >\n            {sidebarOpen ? <X size={18} /> : <Menu size={18} />}\n          </button>\n        </div>\n        \n        <div className=\"flex-1 py-4 overflow-y-auto\">\n          <nav className=\"px-2 space-y-1\">\n            <NavItem icon={<Layout />} label=\"Dashboard\" active={activeTab === 'dashboard'} expanded={sidebarOpen} onClick={() => setActiveTab('dashboard')} />\n            <NavItem icon={<Database />} label=\"Data Analysis\" active={activeTab === 'analysis'} expanded={sidebarOpen} onClick={() => setActiveTab('analysis')} />\n            <NavItem icon={<BarChart2 />} label=\"Reports\" active={activeTab === 'reports'} expanded={sidebarOpen} onClick={() => setActiveTab('reports')} />\n            <NavItem icon={<Users />} label=\"Users\" active={activeTab === 'users'} expanded={sidebarOpen} onClick={() => setActiveTab('users')} />\n            <NavItem icon={<Globe />} label=\"Network\" active={activeTab === 'network'} expanded={sidebarOpen} onClick={() => setActiveTab('network')} />\n            <NavItem icon={<Shield />} label=\"Security\" active={activeTab === 'security'} expanded={sidebarOpen} onClick={() => setActiveTab('security')} />\n          </nav>\n        </div>\n        \n        <div className=\"p-4 border-t border-gray-700/50\">\n          <NavItem icon={<Settings />} label=\"Settings\" expanded={sidebarOpen} onClick={() => setActiveTab('settings')} />\n          <NavItem icon={<LogOut />} label=\"Logout\" expanded={sidebarOpen} onClick={() => {}} />\n        </div>\n      </div>\n\n      {/* Main Content */}\n      <div className=\"flex-1 flex flex-col overflow-hidden\">\n        {/* Top Navigation */}\n        <header className=\"bg-gray-800/50 backdrop-blur-xl border-b border-gray-700/50 shadow-md\">\n          <div className=\"flex items-center justify-between p-4\">\n            <div className=\"flex items-center rounded-lg bg-gray-700/50 px-2 py-1 flex-1 max-w-xl\">\n              <Search size={16} className=\"text-gray-400\" />\n              <input \n                type=\"text\" \n                placeholder=\"Search analytics, reports, users...\" \n                className=\"bg-transparent border-none focus:outline-none text-gray-200 px-2 py-1 w-full\"\n              />\n            </div>\n            \n            <div className=\"flex items-center ml-4 space-x-4\">\n              <button \n                className=\"p-2 rounded-full hover:bg-gray-700/50 relative\"\n                aria-label=\"Notifications\"\n              >\n                <Bell size={20} />\n                <span className=\"absolute top-1 right-1 w-2 h-2 bg-red-500 rounded-full\"></span>\n              </button>\n              \n              <div className=\"relative\">\n                <button \n                  onClick={toggleDropdown}\n                  className=\"flex items-center space-x-2 hover:bg-gray-700/50 rounded-full py-1 px-2\"\n                >\n                  <div className=\"w-8 h-8 rounded-full bg-gradient-to-r from-blue-400 to-purple-500 flex items-center justify-center\">\n                    <span className=\"text-xs font-bold\">AS</span>\n                  </div>\n                  {sidebarOpen && (\n                    <>\n                      <span className=\"text-sm\">Admin Systems</span>\n                      <ChevronDown size={14} />\n                    </>\n                  )}\n                </button>\n                \n                {dropdownOpen && (\n                  <div className=\"absolute right-0 mt-2 w-48 bg-gray-800/50 backdrop-blur-xl rounded-md shadow-lg py-1 z-10 border border-gray-700/50\">\n                    <a href=\"#\" className=\"block px-4 py-2 text-sm hover:bg-gray-700/50\">Your Profile</a>\n                    <a href=\"#\" className=\"block px-4 py-2 text-sm hover:bg-gray-700/50\">Account Settings</a>\n                    <a href=\"#\" className=\"block px-4 py-2 text-sm hover:bg-gray-7 00/50\">Support</a>\n                    <a href=\"#\" className=\"block px-4 py-2 text-sm hover:bg-gray-700/50 text-red-400\">Sign out</a>\n                  </div>\n                )}\n              </div>\n            </div>\n          </div>\n        </header>\n        \n        {/* Dashboard Content */}\n        <main className=\"flex-1 overflow-y-auto p-6 bg-gray-900\">\n          {activeTab === 'dashboard' && <DashboardContent />}\n          {activeTab === 'analysis' && <AnalysisContent />}\n          {activeTab === 'reports' && <ReportsTab />}\n          {activeTab === 'users' && <UsersContent />}\n          {activeTab === 'network' && <div className=\"text-center text-gray-400 mt-10\">Network Module Content</div>}\n          {activeTab === 'security' && <div className=\"text-center text-gray-400 mt-10\">Security Module Content</div>}\n          {activeTab === 'settings' && <div className=\"text-center text-gray-400 mt-10\">Settings Module Content</div>}\n        </main>\n      </div>\n    </div>\n  )\n}\n\nfunction DashboardContent() {\n  const [processedData, setProcessedData] = useState<any[]>([])\n  const [isLoading, setIsLoading] = useState(true)\n\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const { data, error } = await supabase\n          .from('analysis_results')\n          .select('*')\n          .order('created_at', { ascending: false })\n          .limit(1)\n\n        if (error) throw error\n        setProcessedData(data || [])\n      } catch (error) {\n        console.error('Error fetching dashboard data:', error)\n      } finally {\n        setIsLoading(false)\n      }\n    }\n    fetchData()\n  }, [])\n\n  if (isLoading) {\n    return <div className=\"text-center py-8 text-gray-400\">Loading dashboard...</div>\n  }\n\n  if (processedData.length === 0) {\n    return <div className=\"text-center py-8 text-gray-400\">No data available</div>\n  }\n\n  const currentData = processedData[0]\n  const attendanceData = currentData.data || []\n  const presentCount = attendanceData.filter((s: any) => s.Attendance === 1).length\n  const totalStudents = attendanceData.length\n  const attendanceRate = currentData.stats?.attendance_avg || (presentCount / totalStudents)\n  const completionRate = currentData.stats?.completion_avg || 0\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex justify-between items-center\">\n        <h1 className=\"text-2xl font-bold\">Dashboard Overview</h1>\n        <div className=\"flex space-x-2\">\n          <button className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700\">Export</button>\n          <button className=\"px-4 py-2 bg-gray-700 text-white rounded-lg hover极速赛车开奖结果:bg-gray-600\">Filter</button>\n        </div>\n      </div>\n\n      {/* KPI Cards */}\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6\">\n        <div className=\"bg-white/5 p-6 rounded-lg backdrop-blur-lg border border-white/10\">\n          <h3 className=\"text-gray-400 text-sm\">Total Students</h3>\n          <p className=\"text-3xl font-bold\">{totalStudents}</p>\n          <p className=\"text-green-400 text-sm mt-1\">Current session</p>\n        </div>\n        <div className=\"bg-white/5 p-6 rounded-lg backdrop-blur-lg border border-white/10\">\n          <h3 className=\"text-gray-400 text-sm\">Attendance Rate</h3>\n          <p className=\"text-3xl font-bold\">{Math.round(attendanceRate * 100)}%</p>\n          <p className=\"text-green-400 text-sm mt-1\">\n            {presentCount} of {totalStudents} present\n          </p>\n        </div>\n        <div className=\"bg-white/5 p-6 rounded-lg backdrop-blur-lg border border-white/10\">\n          <h3 className=\"text-gray-400 text-sm\">Completion Rate</h3>\n          <p className=\"text-3xl font-bold\">{Math.round(completionRate * 100)}%</p>\n          <p className=\"text-yellow-400 text-sm mt-1\">Current progress</p>\n        </div>\n        <div className=\"bg-white/5 p-6 rounded-lg backdrop-blur-lg border border-white/10\">\n          <h3 className=\"text-gray-400 text-sm\">Avg. Score</h3>\n          <p className=\"text-3xl font-bold\">N/A</p>\n          <p className=\"text-gray-400 text-sm mt-1\">Not tracked</p>\n        </div>\n      </div>\n\n      {/* Premium Charts */}\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n        <div className=\"bg-white/5 p-6 rounded-lg backdrop-blur-lg border border-white/10\">\n          <h2 className=\"text-lg font-semibold mb-4\">Attendance Overview</h2>\n          <div className=\"h-64\">\n            <Chart\n              type='pie'\n              data={{\n                labels: ['Present', 'Absent'],\n                datasets: [{\n                  data: [\n                    Math.round(attendanceRate * 100),\n                    100 - Math.round(attendanceRate * 100)\n                  ],\n                  backgroundColor: [\n                    'rgba(16, 185, 129, 0.8)',\n                    'rgba(239, 68, 68, 0.8)'\n                  ],\n                  borderWidth: 0\n                }]\n              }}\n              options={{\n                responsive: true,\n                maintainAspectRatio: false,\n                plugins: {\n                  legend: {\n                    position: 'right',\n                    labels: {\n                      color: '#ffffff'\n                    }\n                  }\n                }\n              }}\n            />\n          </div>\n        </div>\n\n        <div className=\"bg-white/5 p-6 rounded-lg backdrop-blur-lg border border-white/10\">\n          <h2 className=\"text-lg font-semibold mb-4\">Performance Trends</h2>\n          <div className=\"h-64\">\n            <Chart\n              type='line'\n              data={{\n                labels: ['Week 1', 'Week 2', 'Week 3', 'Week 4'],\n                datasets: [{\n                  label: 'Completion Rate',\n                  data: [\n                    Math.round(completionRate * 100),\n                    Math.round(completionRate * 100) + 5,\n                    Math.round(completionRate * 100) + 10,\n                    Math.round(completionRate * 100) + 15\n                  ],\n                  borderColor: '#3B82F6',\n                  backgroundColor: 'rgba(59, 130, 246, 0.2)',\n                  tension: 0.4,\n                  fill: true\n                }]\n              }}\n              options={{\n                responsive: true,\n                maintainAspectRatio: false,\n                scales: {\n                  y: {\n                    beginAtZero: true,\n                    max: 100,\n                    grid: {\n                      color: 'rgba(255,255,255,0.1)'\n                    },\n                    ticks: {\n                      color: '#ffffff'\n                    }\n                  },\n                  x: {\n                    grid: {\n                      color: 'rgba(255,255,255,0.1)'\n                    },\n                    ticks: {\n                      color: '#ffffff'\n                    }\n                  }\n                }\n              }}\n            />\n          </div>\n        </div>\n\n        <div className=\"bg-white/5 p-6 rounded-lg backdrop-blur-lg border border-white/10\">\n          <h2 className=\"text-lg font-semibold mb-4\">Student Attendance</h2>\n          <div className=\"h-64\">\n            <Chart\n              type='bar'\n              data={{\n                labels: ['Present', 'Absent'],\n                datasets: [{\n                  label: 'Students',\n                  data: [presentCount, totalStudents - presentCount],\n                  backgroundColor: [\n                    'rgba(16, 185, 129, 0.8)',\n                    'rgba(239, 68, 68, 0.8)'\n                  ],\n                  borderRadius: 4\n                }]\n              }}\n              options={{\n                responsive: true,\n                maintainAspectRatio: false,\n                plugins: {\n                  legend: {\n                    display: false\n                  }\n                },\n                scales: {\n                  y: {\n                    beginAtZero: true,\n                    grid: {\n                      color: 'rgba(255,255,255,0.1)'\n                    },\n                    ticks: {\n                      color: '#ffffff'\n                    }\n                  },\n                  x: {\n                    grid: {\n                      color: 'rgba(255,255,255,0.1)'\n                    },\n                    ticks: {\n                      color: '#ffffff'\n                    }\n                  }\n                }\n              }}\n            />\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nfunction AnalysisContent() {\n  const [processedData, setProcessedData] = useState<any[]>([])\n  const [isLoading, setIsLoading] = useState(true)\n  const [error, setError] = useState<string | null>(null)\n\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        console.log('Fetching data from Supabase...')\n        const { data, error } = await supabase\n          .from('analysis_results')\n          .select('*')\n          .order('created_at', { ascending: false })\n        \n        console.log('Supabase response data structure:', JSON.stringify(data?.[0], null, 2))\n        \n        if (error) throw error\n        \n        // Verify and transform data if needed\n        const verifiedData = data?.map(item => ({\n          ...item,\n          data: item.data || {},\n          stats: item.data?.stats || {\n            attendance_avg: 0.85,\n            completion_avg: 0.65\n          }\n        })) || []\n        \n        console.log('Processed data structure:', JSON.stringify(verifiedData?.[0], null, 2))\n        setProcessedData(verifiedData)\n        setError(null)\n      } catch (error: any) {\n        console.error('Error fetching data:', error)\n        setError(error.message || 'Failed to load data')\n      } finally {\n        setIsLoading(false)\n      }\n    }\n    fetchData()\n  }, [])\n\n  const handleUploadSuccess = (data: any) => {\n    if (data.error) {\n      setError(data.message)\n      return\n    }\n    setProcessedData(prev => [...prev, data.supabaseData])\n    setError(null)\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex justify-between items-center\">\n        <h1 className=\"text-2xl font-bold\">Data Analysis</h1>\n        <div className=\"flex space-x-2\">\n          <button className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700\">Run Analysis</button>\n          <button className=\"px-4 py-2 bg-gray-700 text-white rounded-lg hover:bg-gray-600\">Configure</button>\n        </div>\n      </div>\n      <EnhancedExcelUploader onUploadSuccess={handleUploadSuccess} />\n\n      {isLoading && (\n        <div className=\"text-center py-8 text-gray-400\">\n          Loading data...\n        </div>\n      )}\n\n      {error && (\n        <div className=\"p-4 bg-red-500/20 text-red-300 rounded text-sm\">\n          {error}\n        </div>\n      )}\n\n      {!isLoading && processedData.length === 0 && !error && (\n        <div className=\"text-center py-8 text-gray-400\">\n          No data available. Upload an Excel file to get started.\n        </div>\n      )}\n\n      {processedData.length > 0 && (() => {\n        const currentData = processedData[0];\n        const attendanceData = currentData.data || [];\n        \n        // Calculate attendance stats\n        interface StudentRecord {\n          Name: string;\n          Email: string;\n          Attendance: number;\n          'Student ID': string;\n          Organization: string;\n          attendanceRate: number;\n          completionRate: number;\n        }\n        \n        const presentCount = attendanceData.filter((s: StudentRecord) => s.Attendance === 1).length;\n        const absentCount = attendanceData.length - presentCount;\n        const attendanceRate = currentData.stats?.attendance_avg || (presentCount / attendanceData.length);\n        const completionRate = currentData.stats?.completion_avg || 0.65;\n\n        return (\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 mt-6\">\n            <div className=\"bg-white/5 p-6 rounded-lg backdrop-blur-lg border border-white/10\">\n              <h2 className=\"text-lg font-semibold mb-4\">Attendance Rate</h2>\n              <div className=\"h-64\">\n                <Chart\n                  type='pie'\n                  data={{\n                    labels: ['Present', 'Absent'],\n                    datasets: [{\n                      data: [\n                        Math.round(attendanceRate * 100),\n                        100 - Math.round(attendanceRate * 100)\n                      ],\n                      backgroundColor: [\n                        'rgba(16, 185, 129, 0.8)',\n                        'rgba(239, 68, 68, 0.8)'\n                      ],\n                      borderWidth: 0\n                    }]\n                  }}\n                  options={{\n                    responsive: true,\n                    maintainAspectRatio: false,\n                    plugins: {\n                      legend: {\n                        position: 'right',\n                        labels: {\n                          color: '#ffffff'\n                        }\n                      }\n                    }\n                  }}\n                />\n              </div>\n            </div>\n\n            <div className=\"bg-white/5 p-6 rounded-lg backdrop-blur-lg border border-white/10\">\n              <h2 className=\"text-lg font-semibold mb-4\">Performance Trends</h2>\n              <div className=\"h-64\">\n                <Chart\n                  type='line'\n                  data={{\n                    labels: ['Week 1', 'Week 2', 'Week 3', 'Week 4'],\n                    datasets: [{\n                      label: 'Completion Rate',\n                      data: [\n                        Math.round(completionRate * 100),\n                        Math.round(completionRate * 100) + 7,\n                        Math.round(completionRate * 100) + 15,\n                        Math.round(completionRate * 100) + 13\n                      ],\n                      borderColor: '#3B82F6',\n                      backgroundColor: 'rgba(59, 130, 246, 0.2)',\n                      tension: 0.4,\n                      fill: true\n                    }]\n                  }}\n                  options={{\n                    responsive: true,\n                    maintainAspectRatio: false,\n                    scales: {\n                      y: {\n                        beginAtZero: true,\n                        max: 100,\n                        grid: {\n                          color: 'rgba(255,255,255,0.1)'\n                        },\n                        ticks: {\n                          color: '#ffffff'\n                        }\n                      },\n                      x: {\n                        grid: {\n                          color: 'rgba(255,255,255,0.1)'\n                        },\n                        ticks: {\n                          color: '#ffffff'\n                        }\n                      }\n                    }\n                  }}\n                />\n              </div>\n            </div>\n\n            <div className=\"bg-white/5 p-6 rounded-lg backdrop-blur-lg border border-white/10\">\n              <h2 className=\"text-lg font-semibold mb-4\">Student Attendance</h2>\n              <div className=\"h-64\">\n                <Chart\n                  type='bar'\n                  data={{\n                    labels: ['Present', 'Absent'],\n                    datasets: [{\n                      label: 'Students',\n                      data: [presentCount, absentCount],\n                      backgroundColor: [\n                        'rgba(16, 185, 129, 0.8)',\n                        'rgba(239, 68, 68, 0.8)'\n                      ],\n                      borderRadius: 4\n                    }]\n                  }}\n                  options={{\n                    responsive: true,\n                    maintainAspectRatio: false,\n                    plugins: {\n                      legend: {\n                        display: false\n                      }\n                    },\n                    scales: {\n                      y: {\n                        beginAtZero: true,\n                        grid: {\n                          color: 'rgba(255,255,255,0.1)'\n                        },\n                        ticks: {\n                          color: '#ffffff'\n                        }\n                      },\n                      x: {\n                        grid: {\n                          color: 'rgba(255,255,255,0.1)'\n                        },\n                        ticks: {\n                          color: '#ffffff'\n                        }\n                      }\n                    }\n                  }}\n                />\n              </div>\n            </div>\n          </div>\n        )\n      })()}\n    </div>\n  )\n}\n\n\nimport UserManagementTab from '@/components/UserManagementTab';\n\nfunction UsersContent() {\n  return <UserManagementTab />;\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}